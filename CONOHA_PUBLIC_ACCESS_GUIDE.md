# ConoHa Swift Object Storage 公開アクセス設定ガイド

## 問題の状況
- 画像ファイルは正常にアップロード済み（341個）
- 認証は成功している（~/.swift/auth_v1.0）
- 問題：画像URLが401/403エラーでアクセス不可

## 解決方法：ConoHa管理画面での手動設定

### 1. ConoHa管理画面にアクセス
1. [ConoHa管理画面](https://manage.conoha.jp/) にログイン
2. 「Object Storage」を選択

### 2. コンテナの設定を確認
1. 「blog-astro-assets」コンテナを選択
2. コンテナの詳細設定を開く

### 3. 公開読み取り権限を設定
以下の設定を有効化してください：

#### 3.1. コンテナの読み取り権限
- **設定項目**: `X-Container-Read`
- **値**: `.r:*` （全ユーザーに読み取り権限を付与）

#### 3.2. Web一覧の有効化
- **設定項目**: `X-Container-Meta-Web-Listings`
- **値**: `true`

#### 3.3. CORS設定（必要に応じて）
- **設定項目**: `X-Container-Meta-Web-Listings-CORS`
- **値**: `*` （全てのドメインからのアクセスを許可）

### 4. 設定後の確認
設定完了後、以下のURLでアクセステストを行ってください：

```
https://object-storage.tyo2.conoha.io/v1/nc_2520d9a1_blog-astro-assets/blog-astro-assets/blog-images/8811365F79D44C44ACFF5480577C65A8/mee313765-math-0001x1200.png
```

**期待される結果**: HTTP 200 OK

### 5. ブログでの動作確認
設定完了後、Astro開発サーバーで以下を確認：

1. 記事ページの表示
2. 画像の正常表示
3. 404エラーの解消

## 技術的詳細

### 現在の状況
- **認証**: 成功（Swift認証ファイル使用）
- **アップロード**: 成功（341個の画像）
- **公開アクセス**: 失敗（401/403エラー）

### 設定が必要な理由
ConoHa Swift Object Storageは、デフォルトでプライベートアクセスになっています。
Webブラウザから直接アクセスするためには、明示的に公開読み取り権限を設定する必要があります。

### 代替案
もし管理画面での設定が困難な場合：

1. **CDNの利用**: CloudFlare等のCDNを経由
2. **プロキシサーバー**: 認証付きプロキシの構築
3. **署名付きURL**: 一時的なアクセスURLの生成

## 注意事項
- 公開読み取り権限を設定すると、URLを知っている誰でも画像にアクセス可能になります
- 機密性の高い画像がある場合は、適切なアクセス制御を検討してください
- 設定変更後は、必ず動作確認を行ってください 